<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>reveal.js</title>

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/black.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <script src="https://code.jquery.com/jquery-3.2.1.min.js"	integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="	crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/rxjs/5.4.3/Rx.min.js"></script>

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section>
          Slide 1
          <pre class="copytoclipboard">
            <code class="language-javascript">
console.log('hello');
            </code>
          </pre>
        </section>
        <section>
          Slide 2
          <pre class="copytoclipboard">
            <code class="language-javascript">
Rx.Observable.from([1,2,3,4])
.subscribe(n => console.log(n));
            </code>
          </pre>
        </section>
        <section>
          Slide 3
          <button id="sample1">id: sample1</button>
          <pre class="copytoclipboard">
            <code class="language-javascript">
Rx.Observable.fromEvent(document.getElementById('sample1'), 'click').subscribe(ev => console.log(ev));
            </code>
          </pre>
        </section>
      </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>
      // More info about config & dependencies:
      // - https://github.com/hakimel/reveal.js#configuration
      // - https://github.com/hakimel/reveal.js#dependencies
      Reveal.initialize({
        dependencies: [
          { src: 'plugin/markdown/marked.js' },
          { src: 'plugin/markdown/markdown.js' },
          { src: 'plugin/notes/notes.js', async: true },
          { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
        ]
      });
    </script>
    <script>
      /* Prism copy to clipbaord for all pre with copytoclipboard class */
      $('pre.copytoclipboard').each(function () {
        $this = $(this);
        $button = $('<button>Copy</button>');
        $this.wrap('<div/>').removeClass('copytoclipboard');
        $wrapper = $this.parent();
        $wrapper.addClass('copytoclipboard-wrapper').css({position: 'relative'})
        $button.css({position: 'absolute', top: 32, right: 50, height: 30, width: 60}).appendTo($wrapper).addClass('copytoclipboard btn btn-default');
        /* */
        var copyCode = new Clipboard('button.copytoclipboard', {
          target: function (trigger) {
            return trigger.previousElementSibling;
          },
          text: function (trigger) {
            const str = trigger.previousElementSibling.textContent;
            const formatted = str.split('\n').filter(s => s.trim() !== '').join('\n');
            return formatted;
          }
        });
        copyCode.on('success', function (event) {
          event.clearSelection();
          event.trigger.textContent = 'Copied';
          window.setTimeout(function () {
            event.trigger.textContent = 'Copy';
          }, 2000);
        });
        copyCode.on('error', function (event) {
          event.trigger.textContent = 'Press "Ctrl + C" to copy';
          window.setTimeout(function () {
            event.trigger.textContent = 'Copy';
          }, 2000);
        });
      });
    </script>
  </body>
</html>
