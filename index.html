<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>reveal.js</title>

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/black.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <script src="https://code.jquery.com/jquery-3.2.1.min.js"	integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="	crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/rxjs/5.4.3/Rx.min.js"></script>

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>
    <style type="text/css">
      .reveal h1, .reveal h2, .reveal h3, .reveal h4, .reveal h5, .reveal h6 {
        text-transform: none;
      }
      button#the-button, button#the-button2 {
        width: 200px;
        height: 50px;
        font-size: 16px;
      }
    </style>
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section data-background-image="image/rxjs-logo.png" data-background-size="auto 80%">
          <h1>雑なRxJS入門</h1>
          
          <p>2017/8/25 RxJSを活用したAngularアプリの状態管理設計</p>
        </section>
        <section>
        <h2>雑?</h2>
        <ul>
          <li>この勉強会の後半で必要になるRxJSの前提知識だけカバーします</li>
          <ul>
            <li>RxJSってなに</li>
            <li>Observable</li>
            <li>Subject</li>
            <li>BehaviorSubject</li>
          </ul>
        </ul>
        </section>
        <section>
          <h2>RxJSってなに</h2>
          非同期やイベントのコールバックをmap/filter/reduceなどのコレクションのAPIぽく扱えるライブラリ
          <pre class="copytoclipboard">
            <code class="language-javascript">
Rx.Observable.fromEvent(window, 'click')
  .filter(ev => ev.pageX < 400 && ev.pageY < 400)
  .map(ev => 'mouse click, X:' + ev.pageX + ', Y:' + ev.pageY)
  .subscribe(msg => console.log(msg));
            </code>
          </pre>
          <p style="font-size: 70%">このスライドに出てくるコードをCopyボタンでコピーしてコンソールに貼って動かしてみてください</p>
        </section>
        <section>
          <h2>JSのふつうのイベント・非同期ハンドリング</h2>
          <button id="the-button">THE BUTTON</button>
          <pre class="copytoclipboard">
            <code class="language-javascript">              
var button = document.querySelector('#the-button');
button.addEventListener('click', () => console.log('Clicked!'));

Promise.resolve('oi')
  .then(msg => console.log(msg));
            </code>
          </pre>
        </section>
        <section>
          <h2>RxJSだとこう</h2>
          <button id="the-button2">THE BUTTON2</button>
          <pre class="copytoclipboard">
            <code class="language-javascript">              
var button2 = document.querySelector('#the-button2');
Rx.Observable.fromEvent(button2, 'click')
  .subscribe(() => console.log('Clicked!'));

Rx.Observable.fromPromise(Promise.resolve('oi'))
  .subscribe(msg => console.log(msg));
            </code>
          </pre>
        </section>
        <section>
          <h2>RxJSだとなにがうれしいのか？</h2>
          <ul>
            <li>イベント・非同期の扱いが統一される</li>
            <li>map/filterなど便利オペレータが山盛り</li>
          </ul>

          <p>うれしくなくてもAngularが使ってるので覚えたざるを得ない</p>
        </section>
        <section>
          <h2>RxJSは難しい？</h2>
          <ul>
            <li>たぶんYES</li>
            <li>オペレータが100個以上あったりする</li>
            <li>そもそも非同期・イベントハンドリングが難しい？</li>
          </ul>
        </section>
        <section>
          <h2><a href="http://reactivex.io/rxjs/manual/overview.html#introduction">公式ドキュメント</a>が勉強になる</h2>
          <ul>
            <li>英語きつい・・・</li>
            <li>Google翻訳でがんばって読む</li>
            <li><a href="http://qiita.com/maaz118/items/d39d1bc695d964f06fec">Qiitaに置いてます</a></li>
          </ul>
        </section>
        <section>
          <h2>RxJSを分解する</h2>
          <p>6つのコンセプトに分類できる</p>
          <ul>
            <li>Observable</li>
            <li>Observer</li>
            <li>Subscription</li>
            <li>Operators</li>
            <li>Subject</li>
            <li>Schedulers</li>
          </ul>
        </section>
      </div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>
      // More info about config & dependencies:
      // - https://github.com/hakimel/reveal.js#configuration
      // - https://github.com/hakimel/reveal.js#dependencies
      Reveal.initialize({
      	history: true,
      	slideNumber: true,
        dependencies: [
          { src: 'plugin/markdown/marked.js' },
          { src: 'plugin/markdown/markdown.js' },
          { src: 'plugin/notes/notes.js', async: true },
          { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
        ]
      });
    </script>
    <script>
      /* Prism copy to clipbaord for all pre with copytoclipboard class */
      $('pre.copytoclipboard').each(function () {
        $this = $(this);
        $button = $('<button>Copy</button>');
        $this.wrap('<div/>').removeClass('copytoclipboard');
        $wrapper = $this.parent();
        $wrapper.addClass('copytoclipboard-wrapper').css({position: 'relative'})
        $button.css({position: 'absolute', top: 32, right: 50, height: 30, width: 60}).appendTo($wrapper).addClass('copytoclipboard btn btn-default');
        /* */
        var copyCode = new Clipboard('button.copytoclipboard', {
          target: function (trigger) {
            return trigger.previousElementSibling;
          },
          text: function (trigger) {
            const str = trigger.previousElementSibling.textContent;
            const formatted = str.split('\n').filter(s => s.trim() !== '').join('\n');
            return formatted;
          }
        });
        copyCode.on('success', function (event) {
          event.clearSelection();
          event.trigger.textContent = 'Copied';
          window.setTimeout(function () {
            event.trigger.textContent = 'Copy';
          }, 2000);
        });
        copyCode.on('error', function (event) {
          event.trigger.textContent = 'Press "Ctrl + C" to copy';
          window.setTimeout(function () {
            event.trigger.textContent = 'Copy';
          }, 2000);
        });
      });
    </script>
  </body>
</html>
